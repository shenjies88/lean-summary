## 概述

### 路由器

- 转发分组
- 在下三层链接不同协议的网络

## 链路层

### 封装帧

- 以太网帧
- 802标准定义的帧
- SLIP:串行线路IP
  - 简单封装，头尾加上`END`
  - 无法交互双方IP，只有双方都知道的情况下才能通信
  - 没有类型字段只能同时运行一种协议
  - 没有校验
- PPP协议
  - 以`0xe7`开头和结尾
  - 有类型字段
  - 解决了`SLIP`的缺陷
- 回环接口
  - 走完整的网络流程
- MTC(最大传输单元)
  - 当在多个网络中通信时，取决于最小`MTC`

## 网际协议

### IP协议

- IP首部字节采用`big endian`，即低位在左，高位在右，反之就是`little endian`

### 路由选择

- 对上层来说，是直线传输
- 对于下层实际是不断的路由器跳转
- 对于网络层来说是IP地址
- 对于链路层来说是以太网地址，由ARP协议解析`MAC地址`得来

### ifconfig

- LINK0标志
  - 允许压缩`slip`的数据的配置选项
- LINK1标志
  - 如果从跟另一端收到压缩报文，就允许采用`CSLIP`和`LINK2`
- LINK2标志
  - 所有外出的`ICMP`报文都被丢弃
- SIMPLEX标志
  - 有该标志的接口不能收到本机传送的数据，如果接口发送一帧数据到广播地址，那么就会为本机拷贝一份数据到回环地址

### netstat

- 查看系统上的接口信息

## ARP地址解析协议

### 工作原理及过程

- 在网络层是IP传输，实际在数据链路层是以以太网地址不断变动的传输
- 需要请求目的地址时，先向同网络的广播目的地址获取以太网地址
- 不在同一网络则转发到其他网络