## Pod

### 由高层资源对象管理

- RC
- RS
- Deployment

### ConfigMap资源映射

- 环境变量形式
- 文件挂载形式

### 容器内获取Pod的信息

- 环境变量形式
- 文件挂载形式

### 健康检查

- 存活重启探针
- 可用重启探针

### Pod调度

- 根据节点标签调度
- 根据Pod标签调度
- 污点和容忍调度
- Job批处理任务
  - 每个工作项一个Job
  - 工作项对应一个队列，由一个Job去队列取，每个工作项一个Pod（RabbitMQ不可知是否取完）
  - 工作项对应一个队列，由一个Job去队列取，不确定由几个Pod（Redis可知是否取完）
- CronJob定时任务
- 初始化容器
  - 类似于docker-compose的容器依赖
- 自动扩容
  - 不断采集Pod的信息
  - 计算设置的指标
  - 扩容或者缩容达到预设指标
- StatefullSet
  - 用于有状态标识的集群

## Service

### 定义

- 提供一个稳定的 IP地址及端口，去调度后端不稳定的Pod

### Headless

- 没有集群IP，返回后端Pod的列表

## 核心组件运行机制

### 资源对象不同版本之间的转换

## 网络原理

### 各个容器的网络空间独立，通过Veth设备对相连接

### 网桥

- Docker通过docker0网桥联通宿主机以及内部隔离容器
- 本质是配置iptables防火墙和Veth设备对来工作

### CNI

- ​    定义了如何为容器配置网络的规范，只关心容器和网络
- CNI插件负责配置容器的网络资源
- IPAM插件负责对容器的IP地址进行分配和管理

## 存储原理

### PV

- 底层存储资源
- 可以设置节点亲和性

### PVC

- 对存储资源的需求申请，避免业务模块直接操作底层存储